"use strict";(()=>{var e={};e.id=874,e.ids=[874],e.modules={4722:e=>{e.exports=require("next-auth/react")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},7197:(e,t,r)=>{r.r(t),r.d(t,{config:()=>c,default:()=>l,routeModule:()=>f});var n={};r.r(n),r.d(n,{default:()=>u});var i=r(9947),o=r(2706),s=r(6762),a=r(4722);async function u(e,t){let{owner:r,repo:n,branch:i}=e.query,o=await (0,a.getSession)({req:e});if(!o)return t.status(401).json({error:"Unauthorized"});let s=o.accessToken;try{let e=await fetch(`https://api.github.com/repos/${r}/${n}/branches/${i}`,{headers:{Authorization:`token ${s}`}}),o=await e.json();if(o.message)return t.status(400).json({error:o.message});let a=o.commit.sha,u=await fetch(`https://api.github.com/repos/${r}/${n}/git/trees/${a}?recursive=1`,{headers:{Authorization:`token ${s}`}}),l=await u.json();if(l.message)return t.status(400).json({error:l.message});let c=l.tree,f=function(e){let t={name:"",path:"",type:"directory",children:[],size:0};for(let r of e)if("blob"===r.type){let e=r.path.split("/"),n=t,i="";for(let t=0;t<e.length;t++){let o=e[t];i=i?`${i}/${o}`:o;let s=n.children.find(e=>e.name===o);s||(s={name:o,path:i,type:t===e.length-1?"file":"directory",children:[],size:0},n.children.push(s)),t===e.length-1&&(s.size=r.size||0),n=s}}return function e(t){if("file"===t.type)return t.size;let r=0;for(let n of t.children)r+=e(n);return t.size=r,r}(t),t}(c);t.status(200).json(f)}catch(e){console.error("Error fetching folder structure:",e),t.status(500).json({error:"Internal Server Error"})}}let l=(0,s.M)(n,"default"),c=(0,s.M)(n,"config"),f=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/folderStructure",pathname:"/api/folderStructure",bundlePath:"",filename:""},userland:n})},2706:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,t,r)=>{e.exports=r(5600)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=7197);module.exports=r})();